
# üöÄ Telegram Views Predictor ‚Äî Hackathon Solution

**–°–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ö–≤–∞—Ç–æ–≤ (views) —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ Telegram.**
–†–µ—à–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–µ –±—é–¥–∂–µ—Ç—ã, –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞ –¥–æ –µ–≥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –≤–∏–¥–µ **–≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º** (Dashboard) –∏ REST API.

---

## üí° –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞
–ì–ª–∞–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏ ‚Äî **Cold Start**: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–∞–≤–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–µ.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–î–ª—è —Ä–µ—à–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–≥–∏–±—Ä–∏–¥–Ω—ã–π –∞–Ω—Å–∞–º–±–ª—å (Stacking/Blending)** –∏–∑ —Ç—Ä—ë—Ö –º–æ–¥–µ–ª–µ–π, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–æ—é —á–∞—Å—Ç—å –∑–∞–¥–∞—á–∏:

1.  **KNN (K-Nearest Neighbors):**
    * *–†–æ–ª—å:* –ü–æ–∏—Å–∫ ¬´–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–≤–æ–π–Ω–∏–∫–æ–≤¬ª.
    * *–ú–µ—Ö–∞–Ω–∏–∫–∞:* –ù–∞—Ö–æ–¥–∏—Ç 10 –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –∫–∞–Ω–∞–ª–æ–≤ –ø–æ —Å–µ–º–∞–Ω—Ç–∏–∫–µ –Ω–∞–∑–≤–∞–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É—è TF-IDF –Ω–∞ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö n-–≥—Ä–∞–º–º–∞—Ö + SVD). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ö–≤–∞—Ç—ã –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –ø–æ—Ö–æ–∂–∏–µ –∫–µ–π—Å—ã –≤ –ø—Ä–æ—à–ª–æ–º.
2.  **CatBoost Regressor:**
    * *–†–æ–ª—å:* –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å.
    * *–ú–µ—Ö–∞–Ω–∏–∫–∞:* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥, –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏, –¥–∞—Ç–∞–º–∏ –∏ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
3.  **Ridge Regression:**
    * *–†–æ–ª—å:* –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è.
    * *–ú–µ—Ö–∞–Ω–∏–∫–∞:* –õ–∏–Ω–µ–π–Ω–∞—è –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –∞–Ω—Å–∞–º–±–ª—è –Ω–∞ –≤—ã–±—Ä–æ—Å–∞—Ö.

**–§–æ—Ä–º—É–ª–∞ –∞–Ω—Å–∞–º–±–ª—è:**
```math
Final\_Log\_View = 0.5 \cdot CatBoost + 0.3 \cdot KNN + 0.2 \cdot Ridge

```

**–ú–µ—Ç—Ä–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:** ~0.1 (RMSE –Ω–∞ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π).

---

## üìä –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (Feature Engineering)

–í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏, –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

1. **–¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞):**
* –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `TfidfVectorizer` (analyzer='char_wb', ngram_range=(2,5)).
* –°–∂–∞—Ç–∏–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `TruncatedSVD` –¥–æ 100 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (LSA).


2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–∏–∑ –î–∞—Ç—ã):**
* –ú–µ—Å—è—Ü, –î–µ–Ω—å, –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏.
* –§–ª–∞–≥ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –¥–Ω—è (`is_weekend`).


3. **–ß–∏—Å–ª–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:**
* `CPM` (—Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ 1000 –ø–æ–∫–∞–∑–æ–≤).
* `Log(CPM)` (–ª–æ–≥–∞—Ä–∏—Ñ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è).



---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **–Ø–∑—ã–∫:** Python 3.10+
* **ML Core:** scikit-learn, CatBoost
* **NLP:** TF-IDF, TruncatedSVD
* **Web/API:** FastAPI, Uvicorn
* **Data:** Pandas, NumPy

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ app.py              # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –í–µ–±-–¥–∞—à–±–æ—Ä–¥ + API + –û–±—É—á–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ train.py            # –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è offline-–æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ models_pro.pkl      # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –º–æ–¥–µ–ª–∏ (–ê–Ω—Å–∞–º–±–ª—å + NLP —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã)
‚îú‚îÄ‚îÄ requirements.txt    # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ train_hack.csv      # –û–±—É—á–∞—é—â–∞—è –≤—ã–±–æ—Ä–∫–∞
‚îú‚îÄ‚îÄ test_hack.csv       # –¢–µ—Å—Ç–æ–≤–∞—è –≤—ã–±–æ—Ä–∫–∞ (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
‚îî‚îÄ‚îÄ doc-1769013311.csv  # –î–æ–ø. –¥–∞—Ç–∞—Å–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è NLP)

```

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

–°–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—É—á–µ–Ω–∏—è. –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt

```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
python app.py

```

### 3. –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–≤–∏—Å–æ–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **`http://localhost:8000`**

1. –í—ã —É–≤–∏–¥–∏—Ç–µ **Live-–∫–æ–Ω—Å–æ–ª—å**, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è (—á—Ç–µ–Ω–∏–µ CSV, –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, –æ–±—É—á–µ–Ω–∏–µ 3-—Ö –º–æ–¥–µ–ª–µ–π).
2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è `=== –û–ë–£–ß–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û ===`.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—è–≤–∏–≤—à—É—é—Å—è —Ñ–æ—Ä–º—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –≤—Ä—É—á–Ω—É—é.

---

## üì° –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–°–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫ Endpoint.
Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/docs`

### –ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (`/predict`)

**URL:** `POST http://localhost:8000/predict`

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

```json
{
  "cpm": 10.5,
  "channel": "crypto_news_daily",
  "date": "2025-10-05"
}

```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (JSON):**

```json
{
  "predicted_views": 15430
}

```

### –ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ —á–µ—Ä–µ–∑ cURL:

```bash
curl -X 'POST' \
  'http://localhost:8000/predict' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "cpm": 5.0,
  "channel": "sport_life_2025",
  "date": "2025-12-01"
}'

```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ (`/train`)

–ï—Å–ª–∏ –≤—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (csv —Ñ–∞–π–ª—ã), –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
curl -X 'POST' 'http://localhost:8000/train'

```

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–†–µ—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö —Ö–∞–∫–∞—Ç–æ–Ω–∞.

```
@restartdmg
```
